<%- include("../partials/header") %>


    <main class="main">
        <section class="pt-150 pb-150">
            <div class="container">
                <div class="row">
                    <div class="col-lg-10 m-auto">
                        <div class="row">

                            <div class="col-lg-1"></div>
                            <div class="col-lg-6">
                                <div class="login_wrap widget-taber-content p-30 background-white border-radius-5">
                                    <div class="padding_eight_all bg-white">
                                        <div class="heading_s1">
                                            <h3 class="mb-30">Create an Account</h3>
                                        </div>
                                        <!-- <p class="mb-50 font-sm">
                                            Your personal data will be used to support your experience throughout this website, to manage access to your account, and for other purposes described in our privacy policy
                                        </p> -->
                                        <form method="post" action="/post-signup">
                                            <div class="form-group">
                                                <input type="text" required="" name="username" placeholder="Username">
                                            </div>
                                            <div class="form-group">
                                                <input type="text" required="" name="email" placeholder="Email">
                                            </div>
                                            <div class="form-group">
                                                <input required="" type="password" name="password" placeholder="Password">
                                            </div>
                                            <div class="form-group">
                                                <input required="" type="password" name="confirmpassword" placeholder="Confirm password">
                                            </div>
                                            <div class="form-group">
                                                <input type="number" required="" name="phoneNumber" placeholder="Phone Number">
                                            </div>
                                            <div class="form-group">
                                                <button type="button" class="btn btn-sm btn-fill-out btn-block hover-up" id="sendOTPButtom" name="sendOTPBtn">Send OTP</button>
                                            </div>
                                            <div class="form-group">
                                                <input type="text" required="" name="otpInput" placeholder="Enter OTP">
                                            </div>
                                            <div class="form-group">
                                                <button type="button" class="btn btn-sm btn-fill-out btn-block hover-up" id="verifyOTPButton" name="verifyOTPBtn">Verify OTP</button>
                                            </div>
                                            <div class="login_footer form-group">
                                                <div class="chek-form">
                                                    <div class="custome-checkbox">
                                                        <input class="form-check-input" type="checkbox" name="checkbox" id="exampleCheckbox12" value="">
                                                        <label class="form-check-label" for="exampleCheckbox12"><span>I agree to terms &amp; Policy.</span></label>
                                                    </div>
                                                </div>
                                             
                                            </div>
                                            <div class="form-group">
                                                <button type="submit" class="btn btn-fill-out btn-block hover-up" name="loginbtn">Submit &amp; Register</button>
                                            </div>
                                        </form>

                                        <div class="text-muted text-center">Already have an account? <a href="/login">Sign in now</a></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
    
    <!-- Preloader Start -->
    <!-- <div id="preloader-active">
        <div class="preloader d-flex align-items-center justify-content-center">
            <div class="preloader-inner position-relative">
                <div class="text-center">
                    <h5 class="mb-5">Now Loading</h5>
                    <div class="loader">
                        <div class="bar bar1"></div>
                        <div class="bar bar2"></div>
                        <div class="bar bar3"></div>
                    </div>
                </div>
            </div>
        </div>
    </div> -->

    <!-- for sending otp and verifing -->
    <script>
        const sendOTPButtom = document.getElementById("sendOTPButtom");
        const verifyOTPButton = document.getElementById("verifyOTPButton");

        // sending otp
        sendOTPButtom.addEventListener("click",function(e) {
            e.preventDefault();

            const phoneNumber = document.querySelector('input[name="phoneNumber"]').value;
            // if(!phoneNumber) {
            //     errSignupPhoneNumber.innerHTML = "Phone number is required"
            //     return;
            // }
            fetch(`/send-otp?phoneNumber=${phoneNumber}`)

            .then( (Response) => {
                if(!Response.ok) {
                    throw new Error(`HTTP error! status: ${Response.status}`)
                }
                return Response.json();
            })
            .then((data) => {
                console.log("Respponse from server", data)

                Swal.fire({
                    position: 'top-centre',
                    icon: 'success',
                    title: 'OTP send sucessfully',
                    showConfirmButton: false,
                    timer: 1500
                })
                startResendTimer();
            })
            .catch((error) => {
                console.error("Error sending OTP", error);
            })
        })

        // verify otp
        verifyOTPButton.addEventListener("click", function(e) {
            e.preventDefault();

            const phoneNumber = document.querySelector('input[name="phoneNumber"]').value;
            const otpInput = document.querySelector('input[name="otpInput"]').value;
            fetch(`/verify-otp?otpInput=${otpInput}&phoneNumber=${phoneNumber}`,{
                method: "POST"})
            
            .then((Response) => {
                if(!Response.ok) {
                    throw new Error(`HTTP error! status: ${Response.status}`)
                }
                return Response.json();
            })
            .then((data)=>{
                console.log("Response from serve", data)
                Swal.fire({
                    position: 'top-center',
                    icon: 'success',
                    title: 'OTP verified succssfully',
                    showConfirmButton: false,
                    timer: 1500
                })
                startResendTimer()

            })
            .catch((error)=>{
                console.error("Invalid OTP",error);
            })
        }) 
    </script>
    

    <!-- Vendor JS-->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>


    <script src="/userAssets/js/vendor/modernizr-3.6.0.min.js"></script>
    <script src="/userAssets/js/vendor/jquery-3.6.0.min.js"></script>
    <script src="/userAssets/js/vendor/jquery-migrate-3.3.0.min.js"></script>
    <script src="/userAssets/js/vendor/bootstrap.bundle.min.js"></script>
    <script src="/userAssets/js/plugins/slick.js"></script>
    <script src="/userAssets/js/plugins/jquery.syotimer.min.js"></script>
    <script src="/userAssets/js/plugins/wow.js"></script>
    <script src="/userAssets/js/plugins/jquery-ui.js"></script>
    <script src="/userAssets/js/plugins/perfect-scrollbar.js"></script>
    <script src="/userAssets/js/plugins/magnific-popup.js"></script>
    <script src="/userAssets/js/plugins/select2.min.js"></script>
    <script src="/userAssets/js/plugins/waypoints.js"></script>
    <script src="/userAssets/js/plugins/counterup.js"></script>
    <script src="/userAssets/js/plugins/jquery.countdown.min.js"></script>
    <script src="/userAssets/js/plugins/images-loaded.js"></script>
    <script src="/userAssets/js/plugins/isotope.js"></script>
    <script src="/userAssets/js/plugins/scrollup.js"></script>
    <script src="/userAssets/js/plugins/jquery.vticker-min.js"></script>
    <script src="/userAssets/js/plugins/jquery.theia.sticky.js"></script>
    <!-- Template  JS -->
    <script src="/userAssets/js/maind134.js?v=3.4"></script>

    <%- include("../partials/footer") %>